<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BATI DC</title>
<style>
  :root{--bg:#0f1115;--ink:#e5e7eb;--muted:#9aa4b2;--accent:#f59e0b;--stroke:#1f2937}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial}
  /* Appbar */
  header.appbar{position:sticky;top:0;z-index:50;background:var(--bg);border-bottom:1px solid var(--stroke)}
  .bar{max-width:1100px;margin:auto;padding:14px;display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center}
  .brand{font-weight:900;letter-spacing:.3px;font-size:30px}
  .iconbtn{width:44px;height:44px;border-radius:12px;background:transparent;border:2px solid #374151;display:grid;place-items:center;color:#fff;cursor:pointer}
  .searchrow{max-width:1100px;margin:0 auto 10px;padding:0 14px 14px}
  .searchbox{display:grid;grid-template-columns:1fr auto;gap:12px}
  .input{height:48px;border-radius:24px;border:2px solid #374151;background:#0d1116;color:#e5e7eb;padding:0 18px}
  .cta{height:48px;padding:0 18px;border:0;border-radius:24px;background:var(--accent);color:#111;font-weight:800;cursor:pointer}
  /* Tabs */
  .tabs-wrap{position:sticky;top:96px;z-index:25;background:var(--bg);border-top:1px solid var(--stroke);border-bottom:1px solid var(--stroke)}
  .tabs{max-width:1100px;margin:auto;padding:10px;display:flex;gap:10px;overflow:auto}
  .tablink{padding:10px 16px;border:2px solid #374151;border-radius:12px;background:#111418;text-decoration:none;color:#e5e7eb;font-weight:700;white-space:nowrap}
  .tablink.active{background:#e5e7eb;color:#111}
  /* Notices & layout */
  .notice{max-width:1100px;margin:12px auto;padding:12px;border-radius:12px;background:#111418;border:1px solid var(--stroke)}
  main{max-width:1100px;margin:16px auto;padding:0 10px}
  h2{margin:16px 0 10px}
  .grid{display:grid;gap:16px}
  @media(min-width:760px){.grid.cols-2{grid-template-columns:1fr 1fr}}
  .card{background:#111418;border:1px solid var(--stroke);border-radius:16px;overflow:hidden}
  .media{height:220px;background:#0d1116}
  .media img{width:100%;height:100%;object-fit:cover;display:block}
  .pad{padding:16px}
  .meta{opacity:.7;margin-bottom:6px}
  .price{font:800 18px/1.2 system-ui;margin-top:6px}
  .btn{height:40px;padding:0 14px;border-radius:10px;border:2px solid #374151;background:#111418;color:#e5e7eb;font-weight:800;cursor:pointer}
  .btn.primary{background:#e5e7eb;color:#111;border-color:#e5e7eb}
  .chip{display:inline-block;padding:6px 10px;border:1px solid #374151;border-radius:999px;margin:2px 6px 2px 0;font-size:13px}
  /* Drawer */
  .sidedrawer{width:280px;background:#111418;border-right:1px solid var(--stroke);padding:14px}
  .sidedrawer h3{margin:6px 8px}
  .sidedrawer a{display:block;padding:10px 12px;border-radius:10px;color:#e5e7eb;text-decoration:none}
  .sidedrawer a:hover{background:#1f2937}
  /* Modals (auth & cart & fiche) */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:90}
  .sheet{width:min(720px,92vw);background:#111418;border:1px solid var(--stroke);border-radius:16px;overflow:hidden}
  .sheet header{padding:14px 16px;border-bottom:1px solid var(--stroke);font-weight:800;display:flex;justify-content:space-between;align-items:center}
  .sheet .content{padding:16px}
  .fld input{width:100%;height:44px;border-radius:10px;border:1px solid #2b3340;background:#0d1116;color:#e5e7eb;padding:0 12px}
  /* Cart list rows */
  .rowline{display:flex;justify-content:space-between;align-items:center;gap:10px;border:1px solid #2b3340;border-radius:12px;padding:10px;margin:8px 0}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  /* Firebase badge */
  #fb-badge{position:fixed;right:12px;bottom:12px;background:#111;color:#fff;padding:10px 14px;border-radius:14px;font:600 14px system-ui;z-index:999;opacity:.95;display:none}
</style>
</head>
<body>

<!-- Appbar -->
<header class="appbar">
  <div class="bar">
    <button class="iconbtn" id="menuBtn" title="Menu">‚ò∞</button>
    <div class="brand">BATI DC</div>
    <div class="searchrow" style="padding:0">
      <div class="searchbox" style="min-width:260px">
        <input id="q" class="input" placeholder="Rechercher : cylindre, chauffe-eau, disjoncteur‚Ä¶" />
        <button class="cta" id="doSearch">Rechercher</button>
      </div>
    </div>
    <div style="display:flex;gap:10px">
      <button class="iconbtn" id="authBtn" title="Compte pro">üë§</button>
      <button class="iconbtn" id="ordersBtn" title="Mes commandes">üßæ</button>
      <button class="iconbtn" id="cartBtn" title="Panier">üõí</button>
    </div>
  </div>
  <div class="tabs-wrap">
    <nav class="tabs">
      <a class="tablink" data-tab="#accueil">Accueil</a>
      <a class="tablink" data-tab="#produits">Produits</a>
      <a class="tablink" data-tab="#fournisseurs">Fournisseurs</a>
      <a class="tablink" data-tab="#services">Services</a>
    </nav>
  </div>
</header>

<div class="notice">üì¶ <b>Livraison partout en France</b></div>

<main>
  <!-- ACCUEIL -->
  <section id="accueil" class="tabsection">
    <h2>√Ä la une</h2>
    <div id="homeGrid" class="grid cols-2"></div>
  </section>

  <!-- PRODUITS -->
  <section id="produits" class="tabsection" style="display:none">
    <h2>Catalogue produits</h2>
    <div id="catChips" class="pad" style="padding:0 0 8px 0"></div>
    <div id="prodGrid" class="grid cols-2"></div>
  </section>

  <!-- FOURNISSEURS -->
  <section id="fournisseurs" class="tabsection" style="display:none">
    <h2>Fournisseurs BTP ‚Äì France (liste structur√©e)</h2>
    <div class="card"><div class="pad">
      <h3>Multi-sp√©cialistes & r√©seaux n√©goce</h3>
      <ul>
        <li>Saint-Gobain Distribution B√¢timent France : Point.P, La Plateforme du B√¢timent, Cedeo, Asturienne, Clim+, Dispano, PUM, SFIC, CDL Elec</li>
        <li>Descours & Cabaud (Prolians‚Ä¶)</li>
        <li>Rexel ‚Ä¢ Sonepar ‚Ä¢ CGED ‚Ä¢ YESSS √âlectrique</li>
        <li>Richardson</li>
        <li>BigMat ‚Ä¢ Gedimat ‚Ä¢ Gedibois ‚Ä¢ Chausson Mat√©riaux ‚Ä¢ Samse</li>
        <li>W√ºrth France ‚Ä¢ Berner</li>
      </ul>
      <h3>Serrurerie / Quincaillerie</h3>
      <ul>
        <li>Au Forum du B√¢timent (AFDB) ‚Ä¢ Legallais ‚Ä¢ Foussier ‚Ä¢ Setin ‚Ä¢ Dispano Quincaillerie</li>
        <li>Vachette ‚Ä¢ JPM (ASSA ABLOY) ‚Ä¢ Bricard ‚Ä¢ Abus ‚Ä¢ DOM-Metalux ‚Ä¢ H√©racl√®s ‚Ä¢ Ferco ‚Ä¢ Fapim ‚Ä¢ Hoppe ‚Ä¢ Ronis ‚Ä¢ Picard Serrures ‚Ä¢ Deny Security ‚Ä¢ Stremler ‚Ä¢ ISEO ‚Ä¢ Cisa ‚Ä¢ Mottura</li>
      </ul>
      <h3>Plomberie / Chauffage / Sanitaires</h3>
      <ul>
        <li>Atlantic ‚Ä¢ Thermor ‚Ä¢ Ariston ‚Ä¢ De Dietrich ‚Ä¢ Saunier Duval ‚Ä¢ Vaillant ‚Ä¢ Frisquet ‚Ä¢ Viessmann</li>
        <li>Grohe ‚Ä¢ Hansgrohe ‚Ä¢ Geberit ‚Ä¢ Porcher ‚Ä¢ Jacob Delafon ‚Ä¢ Ideal Standard</li>
        <li>Nicoll ‚Ä¢ Wavin ‚Ä¢ Girpi ‚Ä¢ Geberit √©vacuation</li>
        <li>Cedeo ‚Ä¢ Richardson ‚Ä¢ Brossette</li>
      </ul>
      <h3>√âlectricit√© / √âclairage / Domotique</h3>
      <ul>
        <li>Legrand ‚Ä¢ Schneider Electric ‚Ä¢ Hager ‚Ä¢ ABB</li>
        <li>Philips/Signify ‚Ä¢ Osram</li>
        <li>Rexel ‚Ä¢ Sonepar ‚Ä¢ CDL Elec</li>
      </ul>
      <h3>Isolation / Plaque de pl√¢tre / Mortiers</h3>
      <ul>
        <li>Placo¬Æ ‚Ä¢ Isover ‚Ä¢ Weber (Saint-Gobain)</li>
        <li>Knauf ‚Ä¢ Rockwool ‚Ä¢ Ursa ‚Ä¢ Fermacell ‚Ä¢ Siniat</li>
        <li>Sika ‚Ä¢ Parexlanko ‚Ä¢ Mapei</li>
        <li>SFIC ‚Ä¢ Point.P ‚Ä¢ BigMat</li>
      </ul>
      <h3>Bois / Menuiseries / Toiture</h3>
      <ul>
        <li>Dispano ‚Ä¢ Silverwood ‚Ä¢ Panofrance ‚Ä¢ Gedibois</li>
        <li>Velux ‚Ä¢ Fakro</li>
        <li>Asturienne (toiture) ‚Ä¢ Terreal ‚Ä¢ Imerys Toiture</li>
      </ul>
      <h3>Outillage √©lectroportatif & Fixations</h3>
      <ul>
        <li>Hilti ‚Ä¢ Bosch Professional ‚Ä¢ Makita ‚Ä¢ DeWalt ‚Ä¢ Milwaukee ‚Ä¢ Festool</li>
        <li>Spit Paslode ‚Ä¢ Fischer ‚Ä¢ Sormat ‚Ä¢ Scell-It</li>
        <li>W√ºrth ‚Ä¢ Berner</li>
      </ul>
      <h3>Peinture / Rev√™tements / √âtanch√©it√©</h3>
      <ul>
        <li>Tollens ‚Ä¢ Zolpan ‚Ä¢ Seigneurie Gauthier ‚Ä¢ Sikkens</li>
        <li>Weber ‚Ä¢ Parexlanko ‚Ä¢ Mapei ‚Ä¢ Sika</li>
        <li>Gerflor ‚Ä¢ Tarkett</li>
      </ul>
      <h3>PVC, r√©seaux & TP</h3>
      <ul>
        <li>PUM (r√©seaux) ‚Ä¢ Wavin ‚Ä¢ Nicoll ‚Ä¢ Girpi ‚Ä¢ Saint-Gobain PAM</li>
      </ul>
      <h3>Photovolta√Øque / CVC</h3>
      <ul>
        <li>Clim+ ‚Ä¢ Daikin ‚Ä¢ Mitsubishi Electric ‚Ä¢ Atlantic ‚Ä¢ Hitachi</li>
        <li>SunPower ‚Ä¢ REC ‚Ä¢ Trina ‚Ä¢ Canadian Solar (via grossistes PV)</li>
      </ul>
      <h3>Grands groupes & TP</h3>
      <ul>
        <li>Colas ‚Ä¢ Eurovia (Vinci) ‚Ä¢ Eiffage ‚Ä¢ NGE ‚Ä¢ Fayat ‚Ä¢ Spie Batignolles</li>
      </ul>
      <p style="opacity:.7;margin-top:6px">Tu peux ajouter/retirer facilement des lignes si besoin.</p>
    </div></div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="tabsection" style="display:none">
    <h2>Services</h2>
    <div class="card"><div class="pad">Plomberie, serrurerie, chauffage, menuiserie, r√©novation, isolation, photovolta√Øque, PAC, d√©m√©nagement, peinture, carrelage, √©lectrom√©nager, produits de construction‚Ä¶</div></div>
  </section>
</main>

<!-- Drawer lat√©ral -->
<aside id="drawer" class="sidedrawer" aria-hidden="true" style="position:fixed;top:0;left:0;height:100vh;transform:translateX(-100%);transition:transform .25s ease;z-index:1000">
  <header style="display:flex;align-items:center;justify-content:space-between">
    <h3>Menu</h3>
    <button data-drawer-close class="iconbtn" style="border:none">‚úï</button>
  </header>
  <nav class="grid" style="margin-top:8px">
    <a href="#" class="tabjump" data-tab="#accueil">üè† Accueil</a>
    <a href="#" class="tabjump" data-tab="#produits">üõí Produits</a>
    <a href="#" class="tabjump" data-tab="#fournisseurs">üè≠ Fournisseurs</a>
    <a href="#" class="tabjump" data-tab="#services">üß∞ Services</a>
    <hr style="border-color:#1f2937">
    <a href="#" id="openAuth">üë§ Compte professionnel</a>
    <a href="#" id="openCart">üõí Panier</a>
  </nav>
</aside>

<!-- Modal Auth -->
<div id="authModal" class="overlay" aria-hidden="true">
  <div class="sheet">
    <header>Compte professionnel <button data-auth-close class="iconbtn" style="border:none">‚úï</button></header>
    <div class="content">
      <div class="grid">
        <div class="fld"><label>Email</label><input id="email" type="email" placeholder="ex: pro@entreprise.fr" autocomplete="email" /></div>
        <div class="fld"><label>Mot de passe</label><input id="pwd" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" /></div>
        <div class="row">
          <button class="btn" id="btnLogin">Se connecter</button>
          <button class="btn primary" id="btnSignup">Cr√©er un compte</button>
        </div>
        <div style="opacity:.8">Statut : <b id="authState">non connect√©</b></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Panier -->
<div id="cartModal" class="overlay" aria-hidden="true">
  <div class="sheet">
    <header>Mon panier <button data-cart-close class="iconbtn" style="border:none">‚úï</button></header>
    <div class="content">
      <div id="cartList"></div>
      <div class="row" style="justify-content:space-between;align-items:center;margin-top:8px">
        <div class="price">Total : <span id="cartTotal">0,00 ‚Ç¨</span></div>
        <div class="row">
          <button class="btn" id="cartClear">Vider</button>
          <button class="btn primary" id="cartCheckout">Valider la commande</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Fiche produit -->
<div id="prodModal" class="overlay" aria-hidden="true">
  <div class="sheet">
    <header id="pmTitle">Produit <button data-prod-close class="iconbtn" style="border:none">‚úï</button></header>
    <div class="content" id="pmBody"></div>
  </div>
</div>

<!-- Badge Firebase -->
<div id="fb-badge">Firebase : <span id="fb-status">connexion‚Ä¶</span></div>

<script>
/* ======================= Donn√©es produits (exemples r√©els) ======================= */
const PRODUCTS = [
  // Serrurerie
  {id:"vachette-a2p-30x30", title:"Cylindre Vachette A2P 30x30", brand:"Vachette", category:"serrurerie", price:119.00, img:"https://images.unsplash.com/photo-1490367532201-b9bc1dc483f6?q=80&w=1200&auto=format&fit=crop", desc:"Cylindre de s√©curit√© A2P*, livr√© avec 3 cl√©s prot√©g√©es."},
  {id:"heracles-y7c-30x30", title:"Cylindre H√©racl√®s Y7C+ 30x30 (5 cl√©s)", brand:"H√©racl√®s", category:"serrurerie", price:69.90, img:"https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1200&auto=format&fit=crop&q=60", desc:"Cylindre europ√©en certifi√©, s√©curit√© renforc√©e, anticrochetage."},
  {id:"jpm-serrure-multi", title:"Serrure JPM multipoints", brand:"JPM", category:"serrurerie", price:189.00, img:"https://images.unsplash.com/photo-1558002038-1055907df827?w=1200&auto=format&fit=crop&q=60", desc:"Serrure multipoints pour porte d‚Äôentr√©e, p√™ne renforc√©."},
  // Plomberie
  {id:"atlantic-ce-200l", title:"Chauffe-eau Atlantic 200 L", brand:"Atlantic", category:"plomberie", price:349.00, img:"https://images.unsplash.com/photo-1581092921461-eab62e97a780?w=1200&auto=format&fit=crop&q=60", desc:"Vertical, r√©sistance st√©atite, garantie 5 ans cuve."},
  {id:"thermor-ce-150l", title:"Chauffe-eau Thermor 150 L", brand:"Thermor", category:"plomberie", price:299.00, img:"https://images.unsplash.com/photo-1581093588401-16f7b8e2c5c0?w=1200&auto=format&fit=crop&q=60", desc:"Installation murale, √©conomies d‚Äô√©nergie."},
  // √âlectricit√©
  {id:"legrand-disj-20a", title:"Disjoncteur Legrand 20A", brand:"Legrand", category:"electricite", price:14.90, img:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=1200&auto=format&fit=crop&q=60", desc:"Protection circuit 20 A ‚Äì DIN."},
  {id:"schneider-plexo", title:"Prise ext√©rieure Schneider Plexo IP55", brand:"Schneider Electric", category:"electricite", price:12.50, img:"https://images.unsplash.com/photo-1526498460520-4c246339dccb?w=1200&auto=format&fit=crop&q=60", desc:"√âtanche IP55 ‚Äì gris."},
  // Isolation / mat√©riaux
  {id:"placo-ba13", title:"Plaque de pl√¢tre Placo BA13", brand:"Placo", category:"isolation", price:6.90, img:"https://images.unsplash.com/photo-1600566753141-0b0b58f1d9eb?w=1200&auto=format&fit=crop&q=60", desc:"Plaque standard 2500√ó1200√ó13mm."},
  {id:"isover-ibr", title:"Laine de verre Isover IBR 200mm", brand:"Isover", category:"isolation", price:21.90, img:"https://images.unsplash.com/photo-1596079890744-5d5c0f3e1c9b?w=1200&auto=format&fit=crop&q=60", desc:"Rouleau combles, haute performance thermique."},
];

/* ======================= Utilitaires et √©tat ======================= */
const fmt = v => (v||0).toLocaleString('fr-FR',{style:'currency',currency:'EUR'});
const $ = (s, r=document)=> r.querySelector(s);
const $$ = (s, r=document)=> Array.from(r.querySelectorAll(s));

let CART = JSON.parse(localStorage.getItem('cart')||'{}'); // {id: qty}
const saveCart = ()=> localStorage.setItem('cart', JSON.stringify(CART));

/* ======================= Rendu Produits ======================= */
function cardHTML(p){
  return `
  <article class="card">
    <div class="media"><img loading="lazy" src="${p.img}" alt="${p.title}" onerror="this.src='https://picsum.photos/1200/800?grayscale'"></div>
    <div class="pad">
      <div class="meta">${p.brand} ‚Ä¢ ${labelCat(p.category)}</div>
      <div style="font:800 20px/1.2 system-ui">${p.title}</div>
      <p style="opacity:.85">${p.desc}</p>
      <div class="row" style="justify-content:space-between;align-items:center">
        <div class="price">√Ä partir de ${fmt(p.price)}</div>
        <div class="row">
          <button class="btn" data-fiche="${p.id}">Voir la fiche</button>
          <button class="btn primary" data-add="${p.id}">Ajouter</button>
        </div>
      </div>
    </div>
  </article>`;
}
function labelCat(c){
  return c==='serrurerie'?'Serrurerie' : c==='plomberie'?'Plomberie' : c==='electricite'?'√âlectricit√©' :
         c==='isolation'?'Isolation' : c;
}
function renderHome(){
  $('#homeGrid').innerHTML = PRODUCTS.slice(0,4).map(cardHTML).join('');
}
function renderProducts(filterCat=null, q=null){
  let list=[...PRODUCTS];
  if(filterCat) list = list.filter(p=>p.category===filterCat);
  if(q){ const s=q.toLowerCase(); list = list.filter(p => (p.title+' '+p.brand+' '+p.category+' '+p.desc).toLowerCase().includes(s)); }
  $('#prodGrid').innerHTML = list.map(cardHTML).join('') || `<div class="card"><div class="pad">Aucun r√©sultat.</div></div>`;
}
function renderCatChips(){
  const cats = [...new Set(PRODUCTS.map(p=>p.category))];
  const html = ['<span class="chip" data-cat="">Toutes</span>']
    .concat(cats.map(c=>`<span class="chip" data-cat="${c}">${labelCat(c)}</span>`)).join('');
  $('#catChips').innerHTML = html;
  $$('#catChips .chip').forEach(ch => ch.onclick = ()=> {
    const cat = ch.dataset.cat || null;
    renderProducts(cat, $('#q').value.trim());
  });
}

/* ======================= Fiche produit & Ajout Panier ======================= */
function openFiche(p){
  $('#pmTitle').textContent = p.title;
  $('#pmBody').innerHTML = `
    <div class="grid" style="grid-template-columns:1fr 1fr">
      <div><img src="${p.img}" alt="${p.title}" style="width:100%;border-radius:12px"></div>
      <div>
        <div class="meta">${p.brand} ‚Ä¢ ${labelCat(p.category)}</div>
        <h3 style="margin:.3rem 0">${p.title}</h3>
        <p>${p.desc}</p>
        <div class="price">${fmt(p.price)}</div>
        <div class="row" style="margin-top:8px">
          <button class="btn primary" data-add="${p.id}">Ajouter au panier</button>
          <button class="btn" data-prod-close>Fermer</button>
        </div>
      </div>
    </div>`;
  $('#prodModal').style.display='flex';
  $('#pmBody').querySelector('[data-add]').onclick = ()=> { addToCart(p.id); };
  $('#pmBody').querySelector('[data-prod-close]').onclick = ()=> { $('#prodModal').style.display='none'; };
}
function addToCart(id){
  CART[id] = (CART[id]||0)+1;
  saveCart(); renderCart(); $('#cartModal').style.display='flex';
}

/* ======================= Panier ======================= */
function renderCart(){
  const box = $('#cartList'); box.innerHTML='';
  const entries = Object.entries(CART);
  if(!entries.length){ box.innerHTML = `<div class="card"><div class="pad">Votre panier est vide.</div></div>`; $('#cartTotal').textContent=fmt(0); return; }
  let total = 0;
  entries.forEach(([id,qty])=>{
    const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
    total += p.price*qty;
    const row = document.createElement('div');
    row.className='rowline';
    row.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center">
        <img src="${p.img}" alt="" style="width:64px;height:64px;object-fit:cover;border-radius:8px">
        <div><b>${p.title}</b><div class="meta">${p.brand}</div></div>
      </div>
      <div class="row">
        <button class="btn" data-dec="${id}">‚àí</button>
        <div style="min-width:34px;text-align:center;align-self:center">${qty}</div>
        <button class="btn" data-inc="${id}">+</button>
        <button class="btn" data-del="${id}">Retirer</button>
      </div>`;
    box.appendChild(row);
  });
  $('#cartTotal').textContent = fmt(total);

  // handlers
  $$('#cartList [data-inc]').forEach(b=> b.onclick=()=>{ CART[b.dataset.inc]++; saveCart(); renderCart(); });
  $$('#cartList [data-dec]').forEach(b=> b.onclick=()=>{ CART[b.dataset.dec]=Math.max(1,(CART[b.dataset.dec]||1)-1); saveCart(); renderCart(); });
  $$('#cartList [data-del]').forEach(b=> b.onclick=()=>{ delete CART[b.dataset.del]; saveCart(); renderCart(); });
}
$('#cartClear').onclick = ()=>{ CART={}; saveCart(); renderCart(); };
$('#cartBtn').onclick = ()=>{ renderCart(); $('#cartModal').style.display='flex'; };
$('#openCart').onclick = (e)=>{ e.preventDefault(); renderCart(); $('#cartModal').style.display='flex'; };
$('[data-cart-close]').onclick = ()=> $('#cartModal').style.display='none';
$('#cartModal').addEventListener('click', e=>{ if(e.target===e.currentTarget) e.currentTarget.style.display='none'; });
$('#cartCheckout').onclick = ()=> alert('Commande enregistr√©e (d√©mo).');

/* ======================= Interactions list/fiche ======================= */
function bindProductButtons(root=document){
  root.querySelectorAll('[data-add]').forEach(btn=>{
    btn.onclick = ()=> addToCart(btn.dataset.add);
  });
  root.querySelectorAll('[data-fiche]').forEach(btn=>{
    btn.onclick = ()=>{
      const p = PRODUCTS.find(x=>x.id===btn.dataset.fiche);
      if(p) openFiche(p);
    };
  });
}

/* ======================= Tabs & drawer & modals ======================= */
function showTabId(id){
  $$('.tabsection').forEach(s=> s.style.display = (('#'+s.id)===id)?'':'none');
  $$('.tablink').forEach(a=> a.classList.toggle('active', a.dataset.tab===id));
  history.replaceState(null,'',id);
}
$$('.tablink').forEach(a=> a.onclick = (e)=>{ e.preventDefault(); showTabId(a.dataset.tab); });

(function drawer(){
  const btn = $('#menuBtn'); const drawer = $('#drawer'); let backdrop;
  const open=()=>{ drawer.style.transform='translateX(0)'; drawer.setAttribute('aria-hidden','false');
    backdrop = document.createElement('div'); Object.assign(backdrop.style,{position:'fixed',inset:'0',background:'rgba(0,0,0,.35)',zIndex:'999'});
    backdrop.addEventListener('click', close, {once:true}); document.body.appendChild(backdrop); document.body.style.overflow='hidden'; };
  const close=()=>{ drawer.style.transform='translateX(-100%)'; drawer.setAttribute('aria-hidden','true');
    if(backdrop) backdrop.remove(); document.body.style.overflow=''; };
  btn.onclick = (e)=>{ e.preventDefault(); open(); };
  drawer.querySelector('[data-drawer-close]').onclick = close;
  $$('.tabjump').forEach(l=> l.onclick=(e)=>{ e.preventDefault(); showTabId(l.dataset.tab); close(); });
  window.__closeDrawer = close;
})();

(function authModal(){
  const modal = $('#authModal');
  const open = ()=>{ modal.style.display='flex'; modal.setAttribute('aria-hidden','false'); };
  const close= ()=>{ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); };
  $('#authBtn').onclick = open; $('#openAuth').onclick = (e)=>{e.preventDefault(); open();};
  $('[data-auth-close]').onclick = close;
  modal.addEventListener('click', e=>{ if(e.target===modal) close(); });
})();

(function prodModal(){
  const modal = $('#prodModal');
  const close= ()=>{ modal.style.display='none'; };
  $('[data-prod-close]')?.addEventListener('click', close);
  modal.addEventListener('click', e=>{ if(e.target===modal) close(); });
})();

/* ======================= Recherche & initialisation ======================= */
$('#doSearch').onclick = ()=>{
  const q = $('#q').value.trim();
  showTabId('#produits'); renderProducts(null, q); bindProductButtons($('#prodGrid'));
};
document.addEventListener('DOMContentLoaded', ()=>{
  showTabId(location.hash || '#accueil');
  renderHome(); renderProducts(); renderCatChips();
  bindProductButtons(document);
});
</script>

<!-- ======================= Firebase (modular v10) ======================= -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBD4M0HxtjmNUvLjyex2WBeY2iiw7BDSgw",     /* ‚áê remplace uniquement cette valeur */
    authDomain: "bati-dc.firebaseapp.com",
    projectId: "bati-dc",
    storageBucket: "bati-dc.appspot.com",
    messagingSenderId: "223128606936",
    appId: "1:223128606936:web:944577b9fe9c0c93419fad"
  };

  const badge = document.getElementById('fb-badge');
  const status = document.getElementById('fb-status');
  const show = t=>{ if(badge){ badge.style.display='inline-flex'; status.textContent=t; } };

  try{
    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    show('connect√©');

    const email = document.getElementById('email');
    const pwd   = document.getElementById('pwd');
    document.getElementById('btnSignup').onclick = async ()=>{
      try{ await createUserWithEmailAndPassword(auth, email.value.trim(), pwd.value); alert('Compte cr√©√© ‚úÖ'); }
      catch(e){ alert(e.message); }
    };
    document.getElementById('btnLogin').onclick = async ()=>{
      try{ await signInWithEmailAndPassword(auth, email.value.trim(), pwd.value); alert('Connexion r√©ussie ‚úÖ'); }
      catch(e){ alert(e.message); }
    };
    onAuthStateChanged(auth, user=>{
      const el = document.getElementById('authState');
      el.textContent = user ? `connect√© (${user.email})` : 'non connect√©';
    });
    // Expose signOut si tu veux l'ajouter plus tard :
    window.signout = ()=> signOut(auth);
  }catch(e){
    console.error('Firebase init error:', e);
    show('erreur');
  }
</script>

<!-- Petit badge d'√©tat Firebase -->
<div id="fb-badge">Firebase : <span id="fb-status">connexion‚Ä¶</span></div>

<!-- === Correctifs visuels BATI DC (fond blanc + header) === -->
<style id="fix-batidc-light">
  /* Fond du site en blanc + texte fonc√© */
  html, body { background:#ffffff !important; color:#111 !important; }

  /* Sections/cartes claires si ton th√®me avait du ‚Äúdark‚Äù */
  .page, .main, .section, .container { background:#ffffff !important; }
  .card { background:#ffffff !important; color:#111 !important; }
  .pill, .tab, .btn-outline { background:#fff !important; color:#111 !important; border-color:#e5e7eb !important; }

  /* Barre du haut : fond sombre, texte/ic√¥nes blancs (comme ta 2e photo) */
  .appbar, header.topbar, .topbar {
    background:#111 !important; color:#fff !important;
  }
  .appbar a, .topbar a, .appbar .icon, .topbar .icon { color:#fff !important; }

  /* Titre BATI DC un peu plus grand (l√©ger) */
  .brand, .logo, .site-title {
    font-size: 28px !important;
    font-weight: 800 !important;
    letter-spacing: .3px;
  }

  /* Onglets cliquables au-dessus des images (en cas de recouvrement) */
  .tabs, .tabs-wrap, nav { position: relative; z-index: 30; }
</style>
<!-- === Fin correctifs === --></body>
</html>
