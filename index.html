<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BATI DC — Fournitures & Services BTP</title>
<meta name="description" content="BATI DC : serrurerie, plomberie, électricité, isolation. Devis rapide, livraison nationale, accompagnement pro." />
<link rel="canonical" href="https://ton-domaine.com/" />

<!-- Social / Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="BATI DC — Fournitures & Services BTP">
<meta property="og:description" content="Serrurerie, plomberie, électricité, isolation. Devis rapide & livraison nationale.">
<meta property="og:image" content="https://ton-domaine.com/images/og-image.jpg">
<meta property="og:url" content="https://ton-domaine.com/">
<meta name="twitter:card" content="summary_large_image">

<!-- Perf hints -->
<link rel="preconnect" href="https://www.gstatic.com" crossorigin>
<link rel="preconnect" href="https://firebasestorage.googleapis.com" crossorigin>
<link rel="preconnect" href="https://images.unsplash.com" crossorigin>

<style>
  :root{--bg:#0f1115;--ink:#e5e7eb;--muted:#9aa4b2;--accent:#f59e0b;--stroke:#1f2937}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial}
  :focus{outline:2px solid var(--accent);outline-offset:2px} /* ACCESSIBILITÉ */

  /* Appbar */
  header.appbar{position:sticky;top:0;z-index:50;background:var(--bg);border-bottom:1px solid var(--stroke)}
  .bar{max-width:1100px;margin:auto;padding:14px;display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center}
  .brand{font-weight:900;letter-spacing:.3px;font-size:30px}
  .iconbtn{width:44px;height:44px;border-radius:12px;background:transparent;border:2px solid #374151;display:grid;place-items:center;color:#fff;cursor:pointer}
  .searchrow{max-width:1100px;margin:0 auto 10px;padding:0 14px 14px}
  .searchbox{display:grid;grid-template-columns:1fr auto;gap:12px}
  .input{height:48px;border-radius:24px;border:2px solid #374151;background:#0d1116;color:#e5e7eb;padding:0 18px}
  .cta{height:48px;padding:0 18px;border:0;border-radius:24px;background:var(--accent);color:#111;font-weight:800;cursor:pointer}
  /* Tabs */
  .tabs-wrap{position:sticky;top:96px;z-index:25;background:var(--bg);border-top:1px solid var(--stroke);border-bottom:1px solid var(--stroke)}
  .tabs{max-width:1100px;margin:auto;padding:10px;display:flex;gap:10px;overflow:auto}
  .tablink{padding:10px 16px;border:2px solid #374151;border-radius:12px;background:#111418;text-decoration:none;color:#e5e7eb;font-weight:700;white-space:nowrap}
  .tablink.active{background:#e5e7eb;color:#111}
  /* Notices & layout */
  .notice{max-width:1100px;margin:12px auto;padding:12px;border-radius:12px;background:#111418;border:1px solid var(--stroke)}
  main{max-width:1100px;margin:16px auto;padding:0 10px}
  h2{margin:16px 0 10px}
  .grid{display:grid;gap:16px}
  @media(min-width:760px){.grid.cols-2{grid-template-columns:1fr 1fr}}
  .card{background:#111418;border:1px solid var(--stroke);border-radius:16px;overflow:hidden}
  .media{height:220px;background:#0d1116}
  .media img{width:100%;height:100%;object-fit:cover;display:block}
  .pad{padding:16px}
  .meta{opacity:.7;margin-bottom:6px}
  .price{font:800 18px/1.2 system-ui;margin-top:6px}
  .btn{height:40px;padding:0 14px;border-radius:10px;border:2px solid #374151;background:#111418;color:#e5e7eb;font-weight:800;cursor:pointer}
  .btn[disabled]{opacity:.55;cursor:not-allowed}
  .btn.primary{background:#e5e7eb;color:#111;border-color:#e5e7eb}
  .chip{display:inline-block;padding:6px 10px;border:1px solid #374151;border-radius:999px;margin:2px 6px 2px 0;font-size:13px}
  /* Drawer */
  .sidedrawer{width:280px;background:#111418;border-right:1px solid var(--stroke);padding:14px}
  .sidedrawer h3{margin:6px 8px}
  .sidedrawer a{display:block;padding:10px 12px;border-radius:10px;color:#e5e7eb;text-decoration:none}
  .sidedrawer a:hover{background:#1f2937}
  /* Modals */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:90}
  .sheet{width:min(720px,92vw);background:#111418;border:1px solid var(--stroke);border-radius:16px;overflow:hidden}
  .sheet header{padding:14px 16px;border-bottom:1px solid var(--stroke);font-weight:800;display:flex;justify-content:space-between;align-items:center}
  .sheet .content{padding:16px}
  .fld input{width:100%;height:44px;border-radius:10px;border:1px solid #2b3340;background:#0d1116;color:#e5e7eb;padding:0 12px}
  /* Cart list rows */
  .rowline{display:flex;justify-content:space-between;align-items:center;gap:10px;border:1px solid #2b3340;border-radius:12px;padding:10px;margin:8px 0}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  /* Firebase badge */
  #fb-badge{position:fixed;right:12px;bottom:12px;background:#111;color:#fff;padding:10px 14px;border-radius:14px;font:600 14px system-ui;z-index:999;opacity:.95;display:none}
</style>

<!-- ========= SEO Local / Données structurées ========= -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":["Organization","LocalBusiness"],
  "name":"BATI DC",
  "url":"https://ton-domaine.com/",
  "logo":"https://ton-domaine.com/images/logo.png",
  "image":"https://ton-domaine.com/images/og-image.jpg",
  "telephone":"+33 1 23 45 67 89",
  "email":"contact@ton-domaine.com",
  "address":{
    "@type":"PostalAddress",
    "streetAddress":"12 rue des Artisans",
    "addressLocality":"Paris",
    "postalCode":"75011",
    "addressCountry":"FR"
  },
  "vatID":"FRXX999999999",
  "legalName":"BATI DC",
  "sameAs":["https://www.instagram.com/…","https://www.linkedin.com/company/…"],
  "areaServed":"France",
  "openingHours":["Mo-Fr 08:00-19:00","Sa 09:00-13:00"]
}
</script>
</head>
<body>

<!-- Appbar -->
<header class="appbar" role="banner">
  <div class="bar">
    <button class="iconbtn" id="menuBtn" title="Menu" aria-label="Ouvrir le menu" type="button">☰</button>
    <div class="brand" aria-label="BATI DC">BATI DC</div>
    <div class="searchrow" style="padding:0">
      <form class="searchbox" role="search" aria-label="Recherche produits" onsubmit="event.preventDefault();document.getElementById('doSearch').click();" style="min-width:260px">
        <input id="q" class="input" placeholder="Rechercher : cylindre, chauffe-eau, disjoncteur…" aria-label="Rechercher un produit" />
        <button class="cta" id="doSearch" type="button">Rechercher</button>
      </form>
    </div>
    <div style="display:flex;gap:10px" class="icons">
      <button class="iconbtn" id="authBtn" title="Compte pro" aria-label="Ouvrir le compte professionnel" type="button">👤</button>
      <button class="iconbtn" id="ordersBtn" title="Mes commandes" aria-label="Voir mes commandes" type="button">🧾</button>
      <button class="iconbtn" id="cartBtn" title="Panier" aria-label="Ouvrir le panier" type="button">🛒</button>
    </div>
  </div>
  <div class="tabs-wrap">
    <nav class="tabs" role="navigation" aria-label="Sections">
      <a class="tablink" data-tab="#accueil" href="#accueil">Accueil</a>
      <a class="tablink" data-tab="#produits" href="#produits">Produits</a>
      <a class="tablink" data-tab="#fournisseurs" href="#fournisseurs">Fournisseurs</a>
      <a class="tablink" data-tab="#services" href="#services">Services</a>
    </nav>
  </div>
</header>

<!-- Bannière info -->
<div class="notice" role="status">📦 <b>Livraison partout en France</b> — Devis gratuit</div>

<!-- ========= PANNEAU CATEGORIES ========= -->
<style>
  :root{
    --cat-bg:#ffffff; --cat-ink:#0f172a; --cat-stroke:#e5e7eb;
    --cat-hover:#f8fafc; --cat-soft:#eef2ff; --cat-accent: var(--accent,#f59e0b);
  }
  .cats-wrap{max-width:1100px;margin:12px auto 0;padding:0 10px}
  .cats-panel{background:#fff;color:#0f172a;border:1px solid var(--cat-stroke);border-radius:14px;overflow:hidden;
    box-shadow:0 0 0 1px rgba(0,0,0,.02), 0 6px 16px rgba(2,6,23,.06)}
  .cats-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;font:800 18px/1 system-ui;border-bottom:1px solid var(--cat-stroke)}
  .cats-toggle{appearance:none;border:0;background:#111418;color:#fff;border-radius:10px;padding:10px 14px;font-weight:800;cursor:pointer}
  .cats-list{display:flex;flex-direction:column}
  .cat-item{border-top:1px solid var(--cat-stroke);background:#fff}
  .cat-btn{width:100%;background:#fff;border:0;text-align:left;cursor:pointer;display:flex;align-items:center;gap:12px;padding:16px;font:700 17px/1.2 system-ui;color:#0f172a}
  .cat-btn:hover{background:var(--cat-hover)}
  .cat-ico{width:34px;height:34px;border-radius:10px;display:grid;place-items:center;font-size:18px;background:var(--cat-soft)}
  .cat-arrow{margin-left:auto;transition:transform .2s}
  .cat-item[aria-expanded="true"] .cat-arrow{transform:rotate(90deg)}
  .cat-body{display:none;padding:0 16px 16px 60px;background:#fff}
  .cat-item[aria-expanded="true"] .cat-body{display:block}
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .chip-link{text-decoration:none;color:#0f172a;background:#fff;border:1px solid var(--cat-stroke);padding:8px 12px;border-radius:999px;font-weight:600;font-size:14px}
  .chip-link:hover{background:#fdfdfd;border-color:#d1d5db}
  /* Onglets + bannière en BLANC, texte noir */
  .tabs-wrap{ background:#fff !important; border-color:var(--cat-stroke) !important; }
  .tabs .tablink{ background:#fff !important; color:#111 !important; border:1px solid var(--cat-stroke) !important; }
  .tabs .tablink.active{ background:#111 !important; color:#fff !important; border-color:#111 !important; }
  .notice{ background:#fff !important; border-color:var(--cat-stroke) !important; color:#111 !important; }
</style>

<section class="cats-wrap" aria-label="Catégories produits">
  <div class="cats-panel" id="catsPanel">
    <div class="cats-head">
      <span>Catégories</span>
      <button class="cats-toggle" id="catsToggle" type="button" aria-expanded="true" aria-controls="catsList">Masquer</button>
    </div>
    <div class="cats-list" id="catsList">
      <div class="cat-item" aria-expanded="false">
        <button class="cat-btn" type="button"><span class="cat-ico">🔌</span>Électricité & domotique<span class="cat-arrow">›</span></button>
        <div class="cat-body">
          <div class="chips">
            <a href="#" class="chip-link" data-cat="electricite">Disjoncteurs</a>
            <a href="#" class="chip-link" data-cat="electricite">Prises extérieures</a>
            <a href="#" class="chip-link" data-cat="electricite">Tableaux</a>
          </div>
        </div>
      </div>
      <div class="cat-item" aria-expanded="false">
        <button class="cat-btn" type="button"><span class="cat-ico">🗝️</span>Quincaillerie / Serrurerie<span class="cat-arrow">›</span></button>
        <div class="cat-body">
          <div class="chips">
            <a href="#" class="chip-link" data-cat="serrurerie">Cylindres</a>
            <a href="#" class="chip-link" data-cat="serrurerie">Serrures</a>
            <a href="#" class="chip-link" data-cat="serrurerie">Accessoires</a>
          </div>
        </div>
      </div>
      <div class="cat-item" aria-expanded="false">
        <button class="cat-btn" type="button"><span class="cat-ico">🚿</span>Plomberie / Chauffage<span class="cat-arrow">›</span></button>
        <div class="cat-body">
          <div class="chips">
            <a href="#" class="chip-link" data-cat="plomberie">Chauffe-eau</a>
            <a href="#" class="chip-link" data-cat="plomberie">Robinetterie</a>
            <a href="#" class="chip-link" data-cat="plomberie">Tuyauterie</a>
          </div>
        </div>
      </div>
      <div class="cat-item" aria-expanded="false">
        <button class="cat-btn" type="button"><span class="cat-ico">🧱</span>Isolation & plaques<span class="cat-arrow">›</span></button>
        <div class="cat-body">
          <div class="chips">
            <a href="#" class="chip-link" data-cat="isolation">Laine minérale</a>
            <a href="#" class="chip-link" data-cat="isolation">Plaques BA13</a>
            <a href="#" class="chip-link" data-cat="isolation">Enduits</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- ========= /PANNEAU CATEGORIES ========= -->

<main>
  <!-- ACCUEIL -->
  <section id="accueil" class="tabsection" aria-labelledby="home-title">
    <h2 id="home-title">À la une</h2>
    <div id="homeGrid" class="grid cols-2"></div>
  </section>

  <!-- PRODUITS -->
  <section id="produits" class="tabsection" style="display:none" aria-labelledby="prod-title">
    <h2 id="prod-title">Catalogue produits</h2>
    <div id="catChips" class="pad" style="padding:0 0 8px 0"></div>
    <div id="prodGrid" class="grid cols-2"></div>
  </section>

  <!-- FOURNISSEURS -->
  <section id="fournisseurs" class="tabsection" style="display:none" aria-labelledby="four-title">
    <h2 id="four-title">Fournisseurs BTP – France (liste structurée)</h2>
    <div class="card"><div class="pad">
      <h3>Multi-spécialistes & réseaux négoce</h3>
      <ul>
        <li>Saint-Gobain Distribution Bâtiment France : Point.P, La Plateforme du Bâtiment, Cedeo, Asturienne, Clim+, Dispano, PUM, SFIC, CDL Elec</li>
        <li>Descours & Cabaud (Prolians…)</li>
        <li>Rexel • Sonepar • CGED • YESSS Électrique</li>
        <li>Richardson</li>
        <li>BigMat • Gedimat • Gedibois • Chausson Matériaux • Samse</li>
        <li>Würth France • Berner</li>
      </ul>
      <h3>Serrurerie / Quincaillerie</h3>
      <ul>
        <li>Au Forum du Bâtiment (AFDB) • Legallais • Foussier • Setin • Dispano Quincaillerie</li>
        <li>Vachette • JPM • Bricard • Abus • DOM-Metalux • Héraclès • Ferco • Fapim • Hoppe • Ronis • Picard Serrures • Deny Security • Stremler • ISEO • Cisa • Mottura</li>
      </ul>
      <h3>Plomberie / Chauffage / Sanitaires</h3>
      <ul>
        <li>Atlantic • Thermor • Ariston • De Dietrich • Saunier Duval • Vaillant • Frisquet • Viessmann</li>
        <li>Grohe • Hansgrohe • Geberit • Porcher • Jacob Delafon • Ideal Standard</li>
        <li>Nicoll • Wavin • Girpi • Geberit évacuation</li>
        <li>Cedeo • Richardson • Brossette</li>
      </ul>
      <h3>Électricité / Éclairage / Domotique</h3>
      <ul>
        <li>Legrand • Schneider Electric • Hager • ABB</li>
        <li>Philips/Signify • Osram</li>
        <li>Rexel • Sonepar • CDL Elec</li>
      </ul>
      <h3>Isolation / Plaque de plâtre / Mortiers</h3>
      <ul>
        <li>Placo® • Isover • Weber</li>
        <li>Knauf • Rockwool • Ursa • Fermacell • Siniat</li>
        <li>Sika • Parexlanko • Mapei</li>
        <li>SFIC • Point.P • BigMat</li>
      </ul>
      <h3>Bois / Menuiseries / Toiture</h3>
      <ul>
        <li>Dispano • Silverwood • Panofrance • Gedibois</li>
        <li>Velux • Fakro</li>
        <li>Asturienne (toiture) • Terreal • Imerys Toiture</li>
      </ul>
      <h3>Outillage électroportatif & Fixations</h3>
      <ul>
        <li>Hilti • Bosch Professional • Makita • DeWalt • Milwaukee • Festool</li>
        <li>Spit Paslode • Fischer • Sormat • Scell-It</li>
        <li>Würth • Berner</li>
      </ul>
      <h3>Peinture / Revêtements / Étanchéité</h3>
      <ul>
        <li>Tollens • Zolpan • Seigneurie Gauthier • Sikkens</li>
        <li>Weber • Parexlanko • Mapei • Sika</li>
        <li>Gerflor • Tarkett</li>
      </ul>
      <h3>PVC, réseaux & TP</h3>
      <ul><li>PUM (réseaux) • Wavin • Nicoll • Girpi • Saint-Gobain PAM</li></ul>
      <h3>Photovoltaïque / CVC</h3>
      <ul>
        <li>Clim+ • Daikin • Mitsubishi Electric • Atlantic • Hitachi</li>
        <li>SunPower • REC • Trina • Canadian Solar</li>
      </ul>
      <h3>Grands groupes & TP</h3>
      <ul><li>Colas • Eurovia (Vinci) • Eiffage • NGE • Fayat • Spie Batignolles</li></ul>
    </div></div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="tabsection" style="display:none" aria-labelledby="svc-title">
    <h2 id="svc-title">Services</h2>
    <div class="card"><div class="pad">Plomberie, serrurerie, chauffage, menuiserie, rénovation, isolation, photovoltaïque, PAC, déménagement, peinture, carrelage, électroménager, produits de construction…</div></div>

    <!-- FAQ + JSON-LD -->
    <section class="card" style="margin-top:16px">
      <div class="pad">
        <h3>Questions fréquentes</h3>
        <details><summary>Livrez-vous partout en France ?</summary><p>Oui, livraison nationale avec estimation des délais au panier.</p></details>
        <details><summary>Proposez-vous des devis gratuits ?</summary><p>Oui, sous 24–48h selon complexité.</p></details>
        <details><summary>Vos produits sont-ils certifiés ?</summary><p>Selon les références : A2P, CE, NF… précisé sur chaque fiche.</p></details>
      </div>
    </section>
    <script type="application/ld+json">
    {"@context":"https://schema.org","@type":"FAQPage","mainEntity":[
      {"@type":"Question","name":"Livrez-vous partout en France ?","acceptedAnswer":{"@type":"Answer","text":"Oui, livraison nationale avec estimation des délais au panier."}},
      {"@type":"Question","name":"Proposez-vous des devis gratuits ?","acceptedAnswer":{"@type":"Answer","text":"Oui, sous 24–48h selon complexité."}},
      {"@type":"Question","name":"Vos produits sont-ils certifiés ?","acceptedAnswer":{"@type":"Answer","text":"Selon les références : A2P, CE, NF… précisé sur chaque fiche."}}
    ]}
    </script>
  </section>
</main>

<!-- CTA collants mobile -->
<a href="tel:+33123456789" class="cta-call" aria-label="Appeler BATI DC">📞 Appeler</a>
<a href="/devis" class="cta-quote" aria-label="Demander un devis">📝 Devis gratuit</a>
<style>
.cta-call,.cta-quote{position:fixed;bottom:12px;z-index:998;padding:12px 14px;border-radius:999px;font-weight:800;text-decoration:none}
.cta-call{left:12px;background:#10b981;color:#111}
.cta-quote{right:12px;background:#f59e0b;color:#111}
@media (min-width:820px){.cta-call,.cta-quote{display:none}}
</style>

<!-- Drawer latéral -->
<aside id="drawer" class="sidedrawer" aria-hidden="true" style="position:fixed;top:0;left:0;height:100vh;transform:translateX(-100%);transition:transform .25s ease;z-index:1000">
  <header style="display:flex;align-items:center;justify-content:space-between">
    <h3>Menu</h3>
    <button data-drawer-close class="iconbtn" style="border:none" type="button" aria-label="Fermer le menu">✕</button>
  </header>
  <nav class="grid" style="margin-top:8px">
    <a href="#" class="tabjump" data-tab="#accueil">🏠 Accueil</a>
    <a href="#" class="tabjump" data-tab="#produits">🛒 Produits</a>
    <a href="#" class="tabjump" data-tab="#fournisseurs">🏭 Fournisseurs</a>
    <a href="#" class="tabjump" data-tab="#services">🧰 Services</a>
    <hr style="border-color:#1f2937">
    <a href="#" id="openAuth">👤 Compte professionnel</a>
    <a href="#" id="openCart">🛒 Panier</a>
  </nav>
</aside>

<!-- Modal Auth -->
<div id="authModal" class="overlay" aria-hidden="true" role="dialog" aria-labelledby="authTitle" aria-modal="true">
  <div class="sheet">
    <header><span id="authTitle">Compte professionnel</span> <button data-auth-close class="iconbtn" style="border:none" type="button" aria-label="Fermer">✕</button></header>
    <div class="content">
      <div class="grid">
        <div class="fld"><label for="email">Email</label><input id="email" type="email" placeholder="ex: pro@entreprise.fr" autocomplete="email" /></div>
        <div class="fld"><label for="pwd">Mot de passe</label><input id="pwd" type="password" placeholder="••••••••" autocomplete="current-password" /></div>
        <div class="row">
          <button class="btn" id="btnLogin" type="button">Se connecter</button>
          <button class="btn primary" id="btnSignup" type="button">Créer un compte</button>
        </div>
        <div style="opacity:.8">Statut : <b id="authState">non connecté</b></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Panier -->
<div id="cartModal" class="overlay" aria-hidden="true" role="dialog" aria-labelledby="cartTitle" aria-modal="true">
  <div class="sheet">
    <header><span id="cartTitle">Mon panier</span> <button data-cart-close class="iconbtn" style="border:none" type="button" aria-label="Fermer">✕</button></header>
    <div class="content">
      <div id="cartList"></div>
      <div class="row" style="justify-content:space-between;align-items:center;margin-top:8px">
        <div class="price">Total : <span id="cartTotal">0,00 €</span></div>
        <div class="row">
          <button class="btn" id="cartClear" type="button">Vider</button>
          <button class="btn primary" id="cartCheckout" type="button">Valider la commande</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Fiche produit -->
<div id="prodModal" class="overlay" aria-hidden="true" role="dialog" aria-labelledby="pmTitle" aria-modal="true">
  <div class="sheet">
    <header id="pmTitle">Produit <button data-prod-close class="iconbtn" style="border:none" type="button" aria-label="Fermer">✕</button></header>
    <div class="content" id="pmBody"></div>
  </div>
</div>

<!-- Badge Firebase -->
<div id="fb-badge">Firebase : <span id="fb-status">connexion…</span></div>

<script>
/* ======================= Produits "seed" (exemples) ======================= */
const PRODUCTS = [
  {id:"vachette-a2p-30x30", title:"Cylindre Vachette A2P 30x30", brand:"Vachette", category:"serrurerie", price:119.00, img:"https://images.unsplash.com/photo-1490367532201-b9bc1dc483f6?q=80&w=1200&auto=format&fit=crop", desc:"Cylindre de sécurité A2P*, livré avec 3 clés protégées.", certs:["A2P","CE"]},
  {id:"heracles-y7c-30x30", title:"Cylindre Héraclès Y7C+ 30x30 (5 clés)", brand:"Héraclès", category:"serrurerie", price:69.90, img:"https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1200&auto=format&fit=crop&q=60", desc:"Cylindre européen certifié, sécurité renforcée, anticrochetage.", certs:["CE"]},
  {id:"jpm-serrure-multi", title:"Serrure JPM multipoints", brand:"JPM", category:"serrurerie", price:189.00, img:"https://images.unsplash.com/photo-1558002038-1055907df827?w=1200&auto=format&fit=crop&q=60", desc:"Serrure multipoints pour porte d’entrée, pêne renforcé.", certs:["A2P"]},
  {id:"atlantic-ce-200l", title:"Chauffe-eau Atlantic 200 L", brand:"Atlantic", category:"plomberie", price:349.00, img:"https://images.unsplash.com/photo-1581092921461-eab62e97a780?w=1200&auto=format&fit=crop&q=60", desc:"Vertical, résistance stéatite, garantie 5 ans cuve.", certs:["CE","NF"]},
  {id:"thermor-ce-150l", title:"Chauffe-eau Thermor 150 L", brand:"Thermor", category:"plomberie", price:299.00, img:"https://images.unsplash.com/photo-1581093588401-16f7b8e2c5c0?w=1200&auto=format&fit=crop&q=60", desc:"Installation murale, économies d’énergie.", certs:["CE"]},
  {id:"legrand-disj-20a", title:"Disjoncteur Legrand 20A", brand:"Legrand", category:"electricite", price:14.90, img:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=1200&auto=format&fit=crop&q=60", desc:"Protection circuit 20 A – DIN.", certs:["CE","NF"]},
  {id:"schneider-plexo", title:"Prise extérieure Schneider Plexo IP55", brand:"Schneider Electric", category:"electricite", price:12.50, img:"https://images.unsplash.com/photo-1526498460520-4c246339dccb?w=1200&auto=format&fit=crop&q=60", desc:"Étanche IP55 – gris.", certs:["CE","IP55"]},
  {id:"placo-ba13", title:"Plaque de plâtre Placo BA13", brand:"Placo", category:"isolation", price:6.90, img:"https://images.unsplash.com/photo-1600566753141-0b0b58f1d9eb?w=1200&auto=format&fit=crop&q=60", desc:"Plaque standard 2500×1200×13mm.", certs:["CE"]},
  {id:"isover-ibr", title:"Laine de verre Isover IBR 200mm", brand:"Isover", category:"isolation", price:21.90, img:"https://images.unsplash.com/photo-1596079890744-5d5c0f3e1c9b?w=1200&auto=format&fit=crop&q=60", desc:"Rouleau combles, haute performance thermique.", certs:["CE"]}
];

/* ======================= Utils & state ======================= */
const fmt = v => (v==null? null : (v||0).toLocaleString('fr-FR',{style:'currency',currency:'EUR'}));
const $ = (s, r=document)=> r.querySelector(s);
const $$ = (s, r=document)=> Array.from(r.querySelectorAll(s));
let CART = JSON.parse(localStorage.getItem('cart')||'{}');
const saveCart = ()=> localStorage.setItem('cart', JSON.stringify(CART));

/* ======================= Renderers ======================= */
function cardHTML(p){
  const hasPrice = p.price!=null && !isNaN(p.price);
  const priceHTML = hasPrice ? `À partir de ${fmt(p.price)}` : `Prix à venir`;
  return `
  <article class="card" aria-label="${p.title}">
    <div class="media"><img loading="lazy" src="${p.img}" alt="${p.title}" decoding="async" onerror="this.src='https://picsum.photos/1200/800?grayscale'"></div>
    <div class="pad">
      <div class="meta">${p.brand||''} • ${labelCat(p.category)}</div>
      <div style="font:800 20px/1.2 system-ui">${p.title}</div>
      <p style="opacity:.85">${p.desc||''}</p>
      <div class="row" style="justify-content:space-between;align-items:center">
        <div class="price">${priceHTML}</div>
        <div class="row">
          <button class="btn" data-fiche="${p.id}" type="button" aria-label="Voir la fiche ${p.title}">Voir la fiche</button>
          <button class="btn primary" data-add="${p.id}" type="button" ${hasPrice?'':'disabled'} aria-label="Ajouter ${p.title} au panier">Ajouter</button>
        </div>
      </div>
    </div>
  </article>`;
}
function labelCat(c){
  return c==='serrurerie'?'Serrurerie' : c==='plomberie'?'Plomberie' : c==='electricite'?'Électricité' :
         c==='isolation'?'Isolation' : (c||'');
}
function renderHome(){ $('#homeGrid').innerHTML = PRODUCTS.slice(0,4).map(cardHTML).join(''); bindProductButtons($('#homeGrid')); }
function renderProducts(filterCat=null, q=null){
  let list=[...PRODUCTS];
  if(filterCat) list = list.filter(p=>p.category===filterCat);
  if(q){ const s=q.toLowerCase(); list = list.filter(p => (p.title+' '+(p.brand||'')+' '+(p.category||'')+' '+(p.desc||'')).toLowerCase().includes(s)); }
  $('#prodGrid').innerHTML = list.map(cardHTML).join('') || `<div class="card"><div class="pad">Aucun résultat.</div></div>`;
  bindProductButtons($('#prodGrid'));
}
function renderCatChips(){
  const cats = [...new Set(PRODUCTS.map(p=>p.category))];
  const html = ['<span class="chip" data-cat="">Toutes</span>']
    .concat(cats.map(c=>`<span class="chip" data-cat="${c}">${labelCat(c)}</span>`)).join('');
  $('#catChips').innerHTML = html;
  $$('#catChips .chip').forEach(ch => ch.onclick = ()=> {
    const cat = ch.dataset.cat || null;
    renderProducts(cat, $('#q').value.trim());
  });
}

/* ======================= Fiche + Panier ======================= */
function openFiche(p){
  const hasPrice = p.price!=null && !isNaN(p.price);
  const certs = (p.certs||[]).join(', ');
  $('#pmTitle').firstChild && ($('#pmTitle').firstChild.nodeValue = p.title + ' ');
  $('#pmBody').innerHTML = `
    <div class="grid" style="grid-template-columns:1fr 1fr">
      <div><img src="${p.img}" alt="${p.title}" style="width:100%;border-radius:12px" onerror="this.src='https://picsum.photos/1200/800?grayscale'"></div>
      <div>
        <div class="meta">${p.brand||''} • ${labelCat(p.category)}</div>
        <h3 style="margin:.3rem 0">${p.title}</h3>
        <p>${p.desc||''}</p>
        <p class="meta">Conformités : ${certs || '—'}</p>
        <div class="card" style="padding:10px;margin:10px 0">
          <div><b>Livraison :</b> 48–72h estimés (France)</div>
          <div><b>Retours :</b> 14 jours (voir conditions)</div>
          <div><b>Garantie :</b> 2 ans constructeur (selon référence)</div>
        </div>
        <div class="price">${hasPrice?fmt(p.price):'Prix à venir'}</div>
        <div class="row" style="margin-top:8px">
          <button class="btn primary" data-add="${p.id}" ${hasPrice?'':'disabled'} type="button">Ajouter au panier</button>
          <button class="btn" data-prod-close type="button">Fermer</button>
        </div>
      </div>
    </div>
    <!-- Product structured data -->
    <script type="application/ld+json">{
      "@context":"https://schema.org",
      "@type":"Product",
      "name":${JSON.stringify(p.title)},
      "brand":{"@type":"Brand","name":${JSON.stringify(p.brand||'')}},
      "category":${JSON.stringify(labelCat(p.category))},
      "image":[${JSON.stringify(p.img)}],
      "description":${JSON.stringify(p.desc||'')},
      "sku":${JSON.stringify(p.id)},
      "additionalProperty":[${(p.certs||[]).map(c=>`{"@type":"PropertyValue","name":"Certification","value":"${c}"}`).join(',')}],
      "offers":{
        "@type":"Offer",
        "priceCurrency":"EUR",
        "price":${hasPrice?JSON.stringify(p.price.toFixed(2)):'"0"'},
        "availability":"https://schema.org/${hasPrice?'InStock':'PreOrder'}",
        "url":"https://ton-domaine.com/produit/${p.id}"
      }
    }</script>
  `;
  $('#prodModal').style.display='flex';
  $('#pmBody').querySelector('[data-add]')?.addEventListener('click', ()=> addToCart(p.id));
  $('#pmBody').querySelector('[data-prod-close]').onclick = ()=> { $('#prodModal').style.display='none'; };
}
function addToCart(id){ CART[id] = (CART[id]||0)+1; saveCart(); renderCart(); $('#cartModal').style.display='flex'; }
function renderCart(){
  const box = $('#cartList'); box.innerHTML='';
  const entries = Object.entries(CART);
  if(!entries.length){ box.innerHTML = `<div class="card"><div class="pad">Votre panier est vide.</div></div>`; $('#cartTotal').textContent=(0).toLocaleString('fr-FR',{style:'currency',currency:'EUR'}); return; }
  let total = 0;
  entries.forEach(([id,qty])=>{
    const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
    const line = (p.price||0)*qty;
    total += line;
    const row = document.createElement('div');
    row.className='rowline';
    row.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center">
        <img src="${p.img}" alt="" style="width:64px;height:64px;object-fit:cover;border-radius:8px" onerror="this.src='https://picsum.photos/1200/800?grayscale'">
        <div><b>${p.title}</b><div class="meta">${p.brand||''}</div></div>
      </div>
      <div class="row">
        <button class="btn" data-dec="${id}" type="button" aria-label="Diminuer la quantité">−</button>
        <div style="min-width:34px;text-align:center;align-self:center">${qty}</div>
        <button class="btn" data-inc="${id}" type="button" aria-label="Augmenter la quantité">+</button>
        <button class="btn" data-del="${id}" type="button" aria-label="Retirer du panier">Retirer</button>
      </div>`;
    box.appendChild(row);
  });
  $('#cartTotal').textContent = total.toLocaleString('fr-FR',{style:'currency','currency':'EUR'});
  $$('#cartList [data-inc]').forEach(b=> b.onclick=()=>{ CART[b.dataset.inc]++; saveCart(); renderCart(); });
  $$('#cartList [data-dec]').forEach(b=> b.onclick=()=>{ CART[b.dataset.dec]=Math.max(1,(CART[b.dataset.dec]||1)-1); saveCart(); renderCart(); });
  $$('#cartList [data-del]').forEach(b=> b.onclick=()=>{ delete CART[b.dataset.del]; saveCart(); renderCart(); });
}
$('#cartClear').onclick = ()=>{ CART={}; saveCart(); renderCart(); };
$('#cartBtn').onclick = ()=>{ renderCart(); $('#cartModal').style.display='flex'; };
$('#openCart').onclick = (e)=>{ e.preventDefault(); renderCart(); $('#cartModal').style.display='flex'; };
$('[data-cart-close]').onclick = ()=> $('#cartModal').style.display='none';
$('#cartModal').addEventListener('click', e=>{ if(e.target===e.currentTarget) e.currentTarget.style.display='none'; });
$('#cartCheckout').onclick = ()=> alert('Commande enregistrée (démo).');

function bindProductButtons(root=document){
  root.querySelectorAll('[data-add]').forEach(btn=>{ btn.onclick = ()=> addToCart(btn.dataset.add); });
  root.querySelectorAll('[data-fiche]').forEach(btn=>{
    btn.onclick = ()=>{ const p = PRODUCTS.find(x=>x.id===btn.dataset.fiche); if(p) openFiche(p); };
  });
}

function showTabId(id){
  $$('.tabsection').forEach(s=> s.style.display = (('#'+s.id)===id)?'':'none');
  $$('.tablink').forEach(a=> a.classList.toggle('active', a.dataset.tab===id));
  history.replaceState(null,'',id);
}
$$('.tablink').forEach(a=> a.onclick = (e)=>{ e.preventDefault(); showTabId(a.dataset.tab); });

/* Drawer */
(function drawer(){
  const btn = $('#menuBtn'); const drawer = $('#drawer'); let backdrop;
  const open=()=>{ drawer.style.transform='translateX(0)'; drawer.setAttribute('aria-hidden','false');
    backdrop = document.createElement('div'); Object.assign(backdrop.style,{position:'fixed',inset:'0',background:'rgba(0,0,0,.35)',zIndex:'999'});
    backdrop.addEventListener('click', close, {once:true}); document.body.appendChild(backdrop); document.body.style.overflow='hidden'; };
  const close=()=>{ drawer.style.transform='translateX(-100%)'; drawer.setAttribute('aria-hidden','true');
    if(backdrop) backdrop.remove(); document.body.style.overflow=''; };
  btn.onclick = (e)=>{ e.preventDefault(); open(); };
  drawer.querySelector('[data-drawer-close]').onclick = close;
  $$('.tabjump').forEach(l=> l.onclick=(e)=>{ e.preventDefault(); showTabId(l.dataset.tab); close(); });
  window.__closeDrawer = close;
})();

/* Auth modal */
(function authModal(){
  const modal = $('#authModal');
  const open = ()=>{ modal.style.display='flex'; modal.setAttribute('aria-hidden','false'); };
  const close= ()=>{ modal.style.display='none'; modal.setAttribute='true'; };
  $('#authBtn').onclick = open; $('#openAuth').onclick = (e)=>{e.preventDefault(); open();};
  $('[data-auth-close]').onclick = ()=> modal.style.display='none';
  modal.addEventListener('click', e=>{ if(e.target===modal) modal.style.display='none'; });
})();

/* Fiche modal */
(function prodModal(){
  const modal = $('#prodModal');
  const close= ()=>{ modal.style.display='none'; };
  $('[data-prod-close]')?.addEventListener('click', close);
  modal.addEventListener('click', e=>{ if(e.target===modal) close(); });
})();

/* ====== Helper pour injecter des produits importés (depuis Storage) ====== */
window.addImportedProducts = function(items){
  const ids = new Set(PRODUCTS.map(p=>p.id));
  items.forEach(p=>{ if(!ids.has(p.id)){ PRODUCTS.push(p); ids.add(p.id); } });
  renderHome(); renderProducts(); bindProductButtons(document);
  const badge = document.getElementById('fb-badge');
  const status = document.getElementById('fb-status');
  if(badge){ badge.style.display='inline-flex'; status.textContent = `importé ${items.length} produit(s)`; setTimeout(()=>{ badge.style.display='none'; }, 2500); }
};

/* Init */
document.addEventListener('DOMContentLoaded', ()=>{
  showTabId(location.hash || '#accueil');
  renderHome(); renderProducts(); renderCatChips();
  bindProductButtons(document);

  // Recherche bouton
  document.getElementById('doSearch').onclick = ()=>{
    showTabId('#produits');
    renderProducts(null, document.getElementById('q').value.trim());
  };
});
</script>

<!-- ======================= Firebase (auth + storage auto-import) ======================= -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getStorage, ref, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBD4M0HxtjmNUvLjyex2WBeY2iiw7BDSgw",
    authDomain: "bati-dc.firebaseapp.com",
    projectId: "bati-dc",
    storageBucket: "bati-dc.appspot.com",
    messagingSenderId: "223128606936",
    appId: "1:223128606936:web:944577b9fe9c0c93419fad"
  };

  const badge = document.getElementById('fb-badge');
  const status = document.getElementById('fb-status');
  const show = t=>{ if(badge){ badge.style.display='inline-flex'; status.textContent=t; } };

  let app, auth, storage;
  try{
    app  = initializeApp(firebaseConfig);
    auth = getAuth(app);
    storage = getStorage(app);
    show('connecté');
  }catch(e){
    console.error('Firebase init error:', e);
    show('erreur');
  }

  // Auth
  const email = document.getElementById('email');
  const pwd   = document.getElementById('pwd');
  document.getElementById('btnSignup')?.addEventListener('click', async ()=>{
    try{ await createUserWithEmailAndPassword(auth, email.value.trim(), pwd.value); alert('Compte créé ✅'); }
    catch(e){ alert(e.message); }
  });
  document.getElementById('btnLogin')?.addEventListener('click', async ()=>{
    try{ await signInWithEmailAndPassword(auth, email.value.trim(), pwd.value); alert('Connexion réussie ✅'); }
    catch(e){ alert(e.message); }
  });
  onAuthStateChanged(auth, user=>{
    const el = document.getElementById('authState');
    if(el) el.textContent = user ? `connecté (${user.email})` : 'non connecté';
  });
  window.signout = ()=> signOut(auth);

  /* ====== Auto-import depuis Storage
